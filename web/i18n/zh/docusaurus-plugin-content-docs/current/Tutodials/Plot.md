---
sidebar_position: 1
---

# 🎨 绘图

绘图功能的产生源于我们在开发过程中的需求。最初，我们主要专注于集成与地质温度计相关的功能，但随着开发的推进，我们发现了更多的扩展可能性。增强基本功能将帮助我们实现更大的目标。🌍

:::tip

我们已经大幅度重构了绘图模块的UI界面和实现逻辑，相对于 `v0.5.0.0` 以前的版本将会有所不同。

:::

## 目标

在绘图功能页面上，我们将集成更多基础图解模板，包括但不限于：构造环境判别图解、岩石分类判别图解、地质温度计基础图解等。未来，我们也希望实现自定义基础地图等功能。我们的最终目标是为地球科学创建一个全面的绘图功能集合，为研究人员提供便利。🧪

图解模板分类逻辑上主要分为两个层级：

* 按照学科领域区分（当前）
* 以及使用标签系统（计划中）

对于学科领域划分，初步分为：

1. **岩浆岩石学 (Igneous Petrology)**

    - **岩石分类图解 (Rock Classification Diagrams):**
        - **TAS (Total Alkali vs. Silica) 图:** **您提到的TAS图就放在这里。** 它是火山岩分类的基础，全称是“全碱-二氧化硅图”，化学式为 (Na2O+K2O) vs. SiO2。
        - **QAPF/QAP 图:** 适用于深成岩分类的石英-碱性长石-斜长石-似长石图。
        - **R1-R2 图:** 基于主量元素的多阳离子分类图。
        - **K₂O vs. SiO₂ 图:** 用于岩石系列划分（如拉斑、钙碱性、钾玄等）。
    - **构造环境判别图 (Tectonic Discrimination Diagrams):**
        - 各种微量元素三角图 (如 Th-Hf-Ta, Zr-Nb-Y)。
        - 各种微量元素/稀土元素比值图 (如 La/Yb vs. Dy/Yb)。
    - **岩浆演化与源区示踪图 (Magma Evolution & Source Tracing):**
        - **Harker 图:** 主量/微量元素 vs. SiO2 或 MgO。
        - **微量元素蛛网图 (Trace Element Spidergrams):** 球粒陨石标准化、原始地幔标准化、N-MORB标准化等。
        - **稀土元素配分图 (REE Patterns):** 球粒陨石标准化。
2. **地球化学 (Geochemistry)**

    - **同位素地球化学 (Isotope Geochemistry):**
        - **U-Pb 谐和图 (Concordia Diagrams):** 用于锆石等定年。
        - **Rb-Sr, Sm-Nd, Lu-Hf, U-Pb 等时线图 (Isochron Diagrams):** 用于全岩或矿物定年。
        - **初始同位素比值图:** 如 (87Sr/86Sr)i vs. εNd(t) 图，用于示踪岩浆源区。
    - **水文与低温地球化学 (Aqueous & Low-T Geochemistry):**
        - **Piper 三线图 (Piper Diagrams):** 水化学成分分类。
        - **Stiff 图, Schoeller 图:** 水化学类型可视化。
        - **Eh-pH 图:** 判断元素在水溶液中的稳定相态。
3. **沉积学与地层学 (Sedimentology & Stratigraphy)**

    - **沉积物分类与物源分析 (Sediment Classification & Provenance):**
        - **QFL (石英-长石-岩屑) 三角图:** 砂岩分类和物源判别。
        - **A-CN-K (Al₂O₃ - CaO*+Na₂O - K₂O) 三角图:** 指示化学风化程度。
    - **粒度分析 (Grain Size Analysis):**
        - 粒度频率分布直方图和频率曲线。
        - 粒度累积频率概率格纸图。
4. **年代学 (Geochronology)**
    - （此类别与地球化学中的同位素部分有重叠，可以根据用户习惯合并或独立）
    - **年龄概率密度图 (Age Probability Density Plots):** 用于碎屑锆石年龄分布等。
    - **U-Pb 谐和图、等时线图** (同上)。
5. 等等

:::info

某些功能可能会发生变化；当前质量不代表最终结果，因为一些功能仍处于完善和调整阶段。

我们欢迎大家在使用过程中提供宝贵的反馈，以提高软件的可用性和便利性。🌹

:::

## 快速入门

### 图解模板库

默认情况下，进入软件后绘图模块会展示已有的地球科学图解模板库，整体上分为三个部分：

* 左侧的图解模板列表：该列表会显示所有的模板层级情况以及对应的模板
* 右侧顶部的图解模板导航条：导航条会随着点击图解模板列表不同的层级展示不同层级的内容
* 右侧下部的图解模板卡片：显示当前点击图解模板层级下的图解卡片，包含名称和预览图

![Plot_Template_Library](https://geo-1303234197.cos.ap-hongkong.myqcloud.com/V0_5_0_0/Plot_Template_Library.png)

通过选定并点击对应的模板卡片，以进入对应的图解模板绘图界面。

这些图解完全是可拓展的，我们采用了 `Json` 格式来存储主要的图解模板信息，后续我们将会计划实现服务器存储模板文件，本地联网即可在不更新软件的情况下，以实现图解模板列表的更新。

### 绘图界面

绘图界面功能主要分为三个部分：

- **图层列表区域**：即图解模板上对应的绘图元素的图层列表，可以通过点击不同的绘图元素以实现对应的属性修改。
- **绘图图解区域**：查看绘图效果、数据导入、视觉设置、绘图设置及模板说明等。
- **属性面板**：绘图元素及其属性面板列表。通过调整元素属性，可以实现所需的绘图效果。

![Plot_Main_View](https://geo-1303234197.cos.ap-hongkong.myqcloud.com/V0_5_0_0/Plot_Main_View.png)

### 绘图功能栏

绘图图解区域在功能上可以分为：**顶部的功能栏**和**底部的选项卡功能切换**。

在绘图图解的顶部功能栏式主要的绘图功能操作部分，该功能栏将集成全部的绘图控制操作，我们着重介绍工具栏上的功能，在正常用户使用情况下，不需要关注编辑(Edit) 工具栏，这是为制作和拓展图解模板而设计的。对于使用图解模板而言不需要过多关注。

![绘图工具栏用户界面](https://geo-1303234197.cos.ap-hongkong.myqcloud.com/V0_5_0_0/Function_Bar.png)

* 快捷功能
  * **复制到剪切板**：为了方便快速获取图解结果，我们在工具栏最上方最左边设计了一个快速复制图像到剪切板的功能操作。
  * **帮助**：快速跳转官网帮助页面。
* 数据
  * **导入数据（Import Data）**：点击后会弹窗选择数据文件，支持读取 `.csv`、`.xlsx` 和 `.xls` 格式的数据。读取数据后，将根据不同的绘图基础图解模板规则完成数据点绘制。
  * **清除数据（Clear Data）**：点击后会清除所有已经绘制的数据点。
* 视图
  * **重置视图**：将坐标视角重置为显示最佳中心。
  * **定位轴**：显示/隐藏位置定位轴；当启用时，将显示鼠标当前实时在绘图中的坐标数据。
* 选择
  * **取消选择**：取消选择所有已选择的对象。
* 导出
  * **导出**：以 `.png`、`.jpg`、`.bmp`、`.webp` 和 `.svg` 等格式导出图像。
* 设置
  * **图例设置**：图例设置，如图例位置、排列和可见性。
  * **绘图设置**：绘图设置，坐标轴标题的内容、字体、颜色等调整。
  * **脚本设置**：即当前图解模板下的，数据点计算规则，以最终实现数据投图。默认使用投图的情况下，用户不需要关注该属性。
  * **网格设置**：设置绘图界面的网格属性。

:::info

某些功能可能尚未完全实现；我们正在努力改善它们，以提供更好的用户体验。✨

:::

### 图解指南

在绘图区域的最底部分为：绘图选项（默认）和指南选项。

在指南界面中可以看到，当前绘图的一些基础信息，包括但是不限于：

* 导入数据的格式要求
* 图解模板的基础信息
* 图解模板的参考文献
* 图解贡献者

### 图层列表

绘图元素分为 7 种主要类型：

- **线条（Line）**：定义绘图基础地图边界元素的线段。
- **文本（Text）**：绘图中的文本元素用于标记。
- **注释**：一种不随着缩放而改变的特殊文本（计划中）
- **多边形**：绘图中的多边形
- **坐标轴（Axes）**：用于绘图的坐标轴。
- **数据点（Data Point）**：导入的数据的数据点元素。
- **点**：单独的点元素

![绘图元素列表用户界面](https://geo-1303234197.cos.ap-hongkong.myqcloud.com/V0_5_0_0/Laters_Pro.png)

当你选择图层面板的对应绘图元素的时候，在绘图区域会高亮显示该元素，而其他元素将会被降低透明度以去除干扰。对应的属性面板也会展示选定绘图元素的相关属性。🔍

通过对绘图对象的属性进行修改以实现相应的绘图效果。

:::tip

要取消选择所有已选择的元素，您可以使用绘图工具栏上的 **取消选择** 按钮。

:::

## 使用示例

1. 首先在图解模板列表中选择自己想要使用的绘图模板，进入绘图功能页面。
2. 然后查看底部指南（Guide）选项卡以了解当前绘图的基本信息，主要是导入数据的格式要求
   ![绘图元素列表用户界面](https://geo-1303234197.cos.ap-hongkong.myqcloud.com/V0_5_0_0/Plot_Guide_Tab.png)
   从中可以看到，该图解模板所要求的导入数据文件的格式，例如：`xlsx` 文件默认第一个工作表，第一行为表头，表头需要包含列名称为：`Category`，`SiO2`，`K2O`和`Na2O`。其中地球化学元素的单位是 `wt.%` ，而对于 `Category` 这个表头的作用是负责将导入的数据根据不同的组别以生成不同的图例。
3. 在了解基础信息后，点击导入数据，即可完成数据投图，在修改绘图设置后，导出最终结果图以完成工作流程。

# 多语言说明

需要说明的是，软件具备实施切换多语言的能力，对于绘图模块而言，如果在绘图运行中切换多语言，会出现部分语言未切换的情况，这是因为部分语言的显示是实时获取的，也就意味着需要进行相关操作以刷新获取内容。

有多种触发刷新的方式，包括但是不限于点击图解模板列表，重新进入绘图视图等。

最佳的解决办法就是：在使用绘图功能前，切换完成要使用的语言即可。或者切换语言后，重新运行软件即可。
